define("text!apps/home/templates/main.html",[],function(){return'<div class="view-header"></div>\r\n<div class="view-container"></div>\r\n<div class="dropload-down"></div>'}),define("apps/home/models/home",[],function(){return Backbone.Model.extend({initialize:function(e){this.urlApi=e},url:function(){return this.urlApi}})}),define("text!components/modules/goods/tpl.html",[],function(){return'{{?it.style==1}}\r\n<div class="goods01 row">\r\n	{{~it.item_list:v:index}}\r\n	<div class="col-6">\r\n		<a href="#goods/{{!v.id}}">\r\n			<img class="lazy" data-original="{{=v.img}}!2-2" alt="">\r\n			<div class="goods-title twoline">{{=v.title}}</div>\r\n		</a>\r\n		<div class="goods-price">\r\n			<span>￥{{!v.nowprice}}</span>\r\n			<i class="iconfont js-open-cart" cart-gid="{{=v.id}}" cart-type="{{?v.seckill}}2{{??}}0{{?}}">&#xe622;</i>\r\n		</div>\r\n		<div class="goods-active nowrap">\r\n			<b>销量:{{!v.sales}}</b>\r\n			{{?v.seckill}}<span name="seckill">秒杀</span>{{?}}\r\n			{{?v.freesend}}<span name="freesend">包邮</span>{{?}}\r\n			{{?v.cutprice}}<span name="cutprice">砍价</span>{{?}}\r\n		</div>\r\n	</div>\r\n	{{~}}\r\n</div>\r\n{{??it.style==4}}\r\n<div class="goods02 row">\r\n	{{~it.item_list:v:index}}\r\n	<div class="goods-list">\r\n		<a href="#goods/{{!v.id}}">\r\n			<img class="lazy" data-original="{{=v.img}}!4-4" alt="">\r\n		</a>\r\n		<div class="col-8">\r\n			<a href="#goods/{{!v.id}}">\r\n				<div class="goods-title twoline">{{=v.title}}</div>\r\n				<div class="goods-active nowrap" style="min-height:2rem">\r\n					{{?v.seckill}}<span name="seckill">秒杀</span>{{?}}\r\n					{{?v.freesend}}<span name="freesend">包邮</span>{{?}}\r\n					{{?v.cutprice}}<span name="cutprice">砍价</span>{{?}}\r\n				</div>\r\n			</a>\r\n			<div class="goods-price">\r\n				<span>￥{{!v.nowprice}}</span>\r\n				<b>销量:{{!v.sales}}</b>\r\n				<i class="iconfont js-open-cart" cart-gid="{{=v.id}}" cart-type="{{?v.seckill}}2{{??}}0{{?}}">&#xe622;</i>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	{{~}}\r\n</div>\r\n{{??it.style==2}}\r\n<div class="goods03 row">\r\n{{~it.item_list:v:index}}\r\n	<div class="goods-list">\r\n		<a href="#goods/{{=v.id}}">\r\n			<img class="lazy" data-original="{{=v.img}}!1-1" alt="">\r\n			<div class="goods-title twoline">{{=v.title}}\r\n			</div>\r\n		</a>\r\n		<div class="goods-active nowrap">\r\n			{{?v.seckill}}<span name="seckill">秒杀</span>{{?}}\r\n			{{?v.freesend}}<span name="freesend">包邮</span>{{?}}\r\n			{{?v.cutprice}}<span name="cutprice">砍价</span>{{?}}\r\n		</div>\r\n		<div class="goods-price">\r\n			<span>￥{{!v.nowprice}}</span>\r\n			<b>销量:{{!v.sales}}</b>\r\n			<i class="iconfont js-open-cart" cart-gid="{{=v.id}}" cart-type="{{?v.seckill}}2{{??}}0{{?}}">&#xe622;</i>\r\n		</div>\r\n	</div>\r\n{{~}}\r\n</div>\r\n{{?}}'}),define("text!components/cart/templates/main.html",[],function(){return'<div class="bg-fixed close"></div>\r\n<div class="popup-sku goods-edit bg-white fixed row" style="display:block">\r\n	<div class="row pd-lr bd-b">\r\n		<div  class="col-4">\r\n			<img  class="lazy" id=\'sku-img\' data-original="{{=it.img}}!4-4" alt="">\r\n		</div>\r\n		<span class="col-7">\r\n			<p class="oneline">{{=it.title}}</p>\r\n			<div class="price-scope">￥\r\n			{{?(it.price!=it.max_price)}}\r\n				<span class="price-integer">{{=it.price}}-{{=it.max_price}}</span>\r\n			{{??}}\r\n				<span class="price-integer">{{=it.price}}</span>\r\n			{{?}}\r\n			</div>\r\n			{{?!it.show_inventory}}\r\n			<em>库存：<span class="cart-stock-num">{{=it.stock}}</span>件</em>\r\n			{{?}}\r\n		</span>\r\n		<i class="iconfont col-1 tr close-popup close">&#xe623;</i>\r\n	</div>\r\n	<div class="popup-sku-content pd">\r\n		<ul class="cart-sku-control">\r\n            {{for(var i in it.goods_props){}}\r\n            <li>\r\n                <h2>\r\n                    {{=it.goods_props[i].name}}\r\n                </h2>\r\n                <div class="cart-sku-items">\r\n                    {{~it.goods_props[i].gps:v:index}}\r\n                    <label class="cart-sku-click  {{?(v.stock <= 0)}}disabled{{??}}has-stock{{?}} sku-click-{{=it.goods_props[i].id}}{{=v.prop_vid}}"\r\n                    data-str="{{=it.goods_props[i].id}}:{{=v.prop_vid}}">\r\n                        {{=v.prop_value}}\r\n                    </label>\r\n                    {{~}}\r\n                </div>\r\n            </li>\r\n            {{}}}\r\n        </ul>\r\n        {{?(it.btnType === 6)}}\r\n        <div class="red01 pd-lr">\r\n        	<p>1.下单成功后，砍价将会停止，商品价格将不会再有变化！</p>\r\n        	<p>2.下单后请及时付款，如超时订单失效将不可恢复</p>\r\n        </div>\r\n        {{?}}\r\n	</div>\r\n	{{?(it.btnType != 3)}}\r\n        <div class="quantity-control row" style="margin-bottom:2rem">\r\n           	<!--购物车商品数量加减 还没开始做-->\r\n       	    <label class="col-2 col-ml-5 ">数量 :</label>\r\n       	    <div class=\'col-5\'>\r\n   	        	<i class="iconfont btn-i cart-num-minus" stock="{{=it.stock}}">&#xe60a;</i>\r\n   	        	<input type="tel" value="1" data-value="1" class="btn-input" name="cart-num" stock="{{=it.stock}}" index="{{=it.index}}">\r\n   	        	<i class="iconfont btn-i cart-num-plus" stock="{{=it.stock}}">&#xe609;</i>\r\n   	        </div>\r\n        </div>\r\n    {{?}}\r\n{{switch(it.btnType){}}\r\n	{{case 0:}}<!--加入购物车 立即购买 其他地方-->\r\n		<div class="row tc lh-4 white">\r\n			<div class="col-6 cart-submit-btn" style="background: #ff9933">\r\n				加入购物车\r\n			</div>\r\n			<div class="col-6 cart-buy-btn" style="background: #ff6666">\r\n				立即购买\r\n			</div>\r\n		</div>\r\n	{{break;}}\r\n	{{case 1:}}<!--加入购物车 其他地方-->\r\n		<div class="btn-red tc white lh-4 cart-submit-btn">加入购物车</div>	\r\n	{{break;}}\r\n	{{case 2:}}<!--立即购买 其他地方 用于秒杀等-->\r\n		<!-- <div class="btn-red tc white lh-4 cart-submit-btn">立即购买</div> -->\r\n		<div class="btn-red tc white lh-4 cart-buy-btn">立即购买</div>	\r\n	{{break;}}\r\n	{{case 3:}}<!--购物车点击-->\r\n		<div class="btn-red tc white lh-4 cart-sku-submit-btn">确认修改</div>	\r\n	{{break;}}\r\n	{{case 4:}}<!--加入购物车 /*从商品详情底部点击*/-->\r\n		<div class="btn-red tc white lh-4 cart-submit-btn">确认</div>\r\n	{{break;}}\r\n	{{case 5:}}<!--立即购买 /*从商品详情底部点击*/-->\r\n		<div class="btn-red tc white lh-4 cart-buy-btn">确认</div>	\r\n	{{break;}}\r\n	{{case 6:}}<!--立即购买 /*砍价*/-->\r\n		<div class="btn-red tc white lh-4 cart-buy-btn">确认</div>	\r\n	{{break;}}\r\n	{{default:}}<!--默认-->\r\n		<div class="btn-red tc white lh-4">确认</div>	\r\n	{{break;}}\r\n{{}}}\r\n\r\n</div>'}),define("components/cart/models/skudata",[],function(){return Backbone.Model.extend({initialize:function(e){this.urlApi=e},url:function(){return this.urlApi}})}),define("components/cart/models/buy",[],function(){return Backbone.Model.extend({initialize:function(e){this.urlApi=e},url:function(){return this.urlApi}})}),define("components/cart/views/main",["doT","text!components/cart/templates/main.html","components/cart/models/skudata","components/cart/models/buy"],function(e,t,n,r){var i="data/goods/skudata.php",s="/buy/temp.json",i="/cart/product.json",s="cart.json";return Backbone.View.extend({el:"#popup",events:{"click .close":"closeModal","click .cart-submit-btn":"addCart","click .cart-sku-submit-btn":"updateSku","click .cart-num-minus":"numMinus","click .cart-num-plus":"numPlus","click .cart-buy-btn":"buy",'change input[name="cart-num"]':"numChange"},template:e.template(t),initialize:function(){var e=this;this.trigger("components-cart"),Backbone.View.prototype.on("components-cart",function(){var t=Backbone.View.prototype.off,n=["components-cart","updateSku"];for(var r=0;r<n.length;r++)t.call(e,n[r]);e.undelegateEvents()}),this.model=new n(i),this.cartModel=new r(s),this.selected={},this.pid=0,$.indicator(),this.undelegateEvents()},loadDom:function(){var e=this;this.skuStock(),this.$el.html(this.template(e.data)),this.$("img.lazy").lazyload({placeholder:"images/grey.gif",event:"load"}),this.stockDom=$(".cart-stock-num"),this.priceDom=$(".price-scope .price-integer"),this.inputDom=$("input[name='cart-num']"),this.minusDom=$(".cart-num-minus"),this.plusDom=$(".cart-num-plus"),$(".cart-sku-click").bind("click",function(t){e.skuSelect(t)}),this.stock=this.data.stock,this.all_stock=this.data.stock,this.productsIDs=this.data.products,$.localStorage()&&(this.selectedStorage=JSON.parse(sessionStorage.getItem("selected"))||0);if(this.pid!==0){var t=e.getPropStr(this.pid),n=t.split(";");for(var r in n){var i=n[r].split(":").join(""),s=$(".sku-click-"+i);s.trigger("click")}}else if(this.selectedStorage!==0)for(var o in this.selectedStorage){var u=this.selectedStorage[o].split(":").join(""),a=$(".sku-click-"+u);a.trigger("click")}return this.delegateEvents(),$.indicator("hide"),this},updateSku:function(){this.selectInfo!==null?this.trigger("updateSku",this.selectInfo):layer.open({content:"请选择",time:1.5})},addCart:function(){var e="addCart";this.cartSubmit(e)},buy:function(){var e="buy";this.cartSubmit(e)},cartSubmit:function(e){if(this.all_stock==0)return layer.open({content:"库存不足",time:1.5}),!1;var t={action:e,goods_id:this.gid,quantity:parseInt(this.inputDom.val())};this.model.get("btnType")===6&&(t.baid=this.baid);if(_global.user=="")return $("#popup").empty(),this.undelegateEvents(),$.signInit("modal"),!1;if(this.selectInfo==null&&this.productsIDs!="")return layer.open({content:"请选择",time:1.5}),!1;this.productsIDs==""?(t.product_id=0,t.props_str=""):(t.product_id=this.selectInfo.id,t.props_str=this.selectInfo.props_str.replace(/:/g," ")),this.cartModel.clear(),this.cartModel.set(t);var n=this;$.indicator(),this.undelegateEvents(),this.cartModel.save(null,{success:function(t,r,i){if(r.status)if(e=="buy"){var s="#order?&ids="+r.id;Backbone.history.navigate(s,{trigger:!0})}else layer.open({content:"商品添加成功",time:1.5}),n.closeModal();else layer.open({content:r.msg,time:2.5}),n.delegateEvents();$.indicator("hide")}})},getPropStr:function(e){var t=this.data.products;for(var n in t)if(t[n].id==e)return t[n].props},skuSelect:function(e){var t=this,n=$(e.currentTarget);this.selectInfo=null;if(!n.hasClass("disabled")){n.toggleClass("checked").siblings().removeClass("checked");var r=n.parent(".cart-sku-items").parent("li").index();n.hasClass("checked")?(this.selected[r]=n.attr("data-str"),this.skuEach()):(delete this.selected[r],$("label.has-stock").removeClass("disabled"),this.skuEach()),Object.keys(this.goods_props).length==Object.keys(this.selected).length?(this.stock=this.getStock(this.selected),this.stockDom.text(this.stock),this.selectInfo=this.getSkuInfo(),this.priceDom.text(this.selectInfo.price)):(this.stockDom.text(t.stock),this.data.price==this.data.max_price?this.priceDom.text(this.data.price):this.priceDom.html(this.data.price+"-"+this.data.max_price))}this.selectInfo===null?this.inputDom.val(1):$("#sku-img").attr("src",this.selectInfo.img+"!4-4")},getSkuInfo:function(){var e=this.data.products,t={};for(var n in e){var r=e[n];if(this.checkStock(this.selected,r.props)){t={id:r.id,price:r.price,props_str:r.props_str,vip_price:r.vip_price,stock:r.stock,img:r.img};break}}return t},skuEach:function(){var e=this;$(".cart-sku-control").children("li").each(function(){var t=$(this).index(),n=[],r=0;for(var i in e.selected)t!=i&&(n.push(e.selected[i]),$(this).children(".cart-sku-items").children("label").each(function(t){var i=[];i=$.copyObj(n),i.push($(this).attr("data-str")),r=e.getStock(i),r<=0?$(this).addClass("disabled"):$(this).removeClass("disabled")}))});var t=[];for(var n in this.selected)t.push(this.selected[n]);this.stock=this.getStock(t)},skuStock:function(e){this.goods_props=this.data.goods_props;for(var t in this.goods_props){var n=this.goods_props[t];for(var r in n.gps){var i=n.gps[r],s=[n.id+":"+i.prop_vid];n.gps[r].stock=this.getStock(s)}}},getStock:function(e){var t=this.data.products,n=0;for(var r in t)this.checkStock(e,t[r].props)&&(n+=parseInt(t[r].stock));return n},checkStock:function(e,t){var n=!0;for(var r in e)if(t.indexOf(e[r])==-1){n=!1;break}return n},open:function(e,t){if(t)this.gid=t,this.type=0;else{var n=$(e.currentTarget);this.gid=n.attr("cart-gid"),this.bid=n.attr("cart-bid")||undefined,this.baid=n.attr("cart-baid")||undefined,this.pid=n.attr("cart-pid")||0,this.type=parseInt(n.attr("cart-type"))||0,e.stopPropagation(),e.preventDefault()}var r=this;this.model.set({id:this.gid,bid:this.bid,baid:this.baid,btnType:this.type});if($.localStorage()){var i=JSON.parse(sessionStorage.getItem("skudata"))||0;if(i!==0&&i.id==this.gid&&i.btnType==this.type&&i.btnType!=6)return this.data=i,this.data.btnType=this.type,this.loadDom(),!1;sessionStorage.removeItem("skudata")}this.model.fetch({data:{id:this.gid,baid:this.baid},success:function(e,t,n){r.data=r.model.toJSON(),$.localStorage()&&sessionStorage.setItem("skudata",JSON.stringify(r.data)),r.model.on("sync",r.loadDom,r)},error:function(e,t){$.catchError(t)}})},numPlus:function(e){if(this.selectInfo!=null||this.productsIDs==""){var t=parseInt(this.inputDom.val())+1;this.inputDom.val(t).trigger("change")}else layer.open({content:"请选择",time:1.5})},numMinus:function(e){if(this.selectInfo!=null||this.productsIDs==""){var t=parseInt(this.inputDom.val())-1;this.inputDom.val(t).trigger("change")}else layer.open({content:"请选择",time:1.5})},numChange:function(){if(this.selectInfo==null&&this.productsIDs!="")return layer.open({content:"请选择",time:1.5}),this.inputDom.val(1),!1;var e=this.inputDom.val();e=parseInt(e);if(e<1)return layer.open({content:"至少购买1件",time:1.5}),this.inputDom.val(1),!1;if(!/^[1-9]\d*$/.test(e))return layer.open({content:"请填写正整数",time:1.5}),this.inputDom.val(1),!1;if(e>this.stock)return layer.open({content:"只有"+this.stock+"件啦",time:1.5}),this.inputDom.val(this.stock),!1;this.inputDom.val(e)},closeModal:function(e){$.localStorage()&&sessionStorage.setItem("selected",JSON.stringify(this.selected));var t=this;$(".fixed").animate({bottom:"-38rem"},500,function(){$("#popup").empty(),t.undelegateEvents()})}})}),define("components/modules/goods/view",["doT","text!components/modules/goods/tpl.html","components/cart/views/main","lazyload"],function(e,t,n){var r=Backbone.View.extend({template:e.template(t),events:{"click .js-open-cart":"openCart"},initialize:function(){},render:function(){return this.$el.html(this.template(this.model)),this.$("img.lazy").lazyload({placeholder:"images/grey.gif",threshold:641}),this},openCart:function(e){var t=new n;t.open(e)}});return r}),define("text!components/modules/slide/tpl.html",[],function(){return'{{?it.style==2}}\r\n<div class="diy-conitem" style="margin:{{=it.m_tb}} 0;">\r\n    {{~it.item_list:v:index}}\r\n        <a href="{{=v.url}}">\r\n            <img class="lazy" data-original="{{=v.img}}!1-0" style="width:100%;padding:{{=it.pd_tb}} 0" alt="{{=v.title}}">\r\n        </a>    \r\n    {{~}}\r\n</div>\r\n{{??}}\r\n<div class="swiper-container swiper-banner" style="margin:{{=it.m_tb}} 0;min-height:10px;/*height:50vw*/">\r\n    <div class="swiper-wrapper">\r\n        {{~it.item_list:v:index}}\r\n        <div class="swiper-slide">\r\n            <a href="{{=v.url}}" style="overflow:hidden;display:inline-block;width:100%">\r\n                <img class="swiper-lazy" data-src="{{=v.img}}!1-0"  style="width:100%;" alt="说明：{{=v.title}}">\r\n            </a>\r\n            <div class="swiper-lazy-preloader"></div> \r\n        </div>\r\n        {{~}}\r\n    </div>\r\n    <div class="swiper-pagination"></div>\r\n</div>\r\n{{?}}\r\n'}),define("components/modules/slide/view",["doT","text!components/modules/slide/tpl.html","swiper","lazyload"],function(e,t){return Backbone.View.extend({template:e.template(t),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model)),this.$el.find(".swiper-container").swiper({loop:!0,pagination:$(".swiper-pagination",this.$el)[0],autoplay:2500,speed:300,autoplayDisableOnInteraction:!1,paginationClickable:!0,lazyLoading:!0,lazyLoadingInPrevNext:!0,lazyLoadingOnTransitionStart:!0,lazyLoadingInPrevNextAmount:2}),this.$("img.lazy").lazyload({placeholder:"images/grey.gif",threshold:641}),this}})}),define("text!components/modules/rtf/tpl.html",[],function(){return'<div class="diy-conitem">\r\n	<div class="diy-rtf" style="margin:{{=it.m_tb}} 0;">{{=it.html}}</div>\r\n</div>'}),define("components/modules/rtf/view",["doT","text!components/modules/rtf/tpl.html","lazyload"],function(e,t){return Backbone.View.extend({template:e.template(t),events:{},initialize:function(){},render:function(){return this.model.html=$.rtfImages(this.model.html),this.$el.html(this.template(this.model)),this.$("img.lazy").lazyload({placeholder:"images/grey.gif",threshold:641}),this}})}),define("text!components/modules/title/tpl.html",[],function(){return'<div class="diy-conitem" style="margin:{{=it.m_tb}} 0;">      \r\n    <section class="pd-lr diy-title title-style-{{=it.style}} {{?it.position==0}}tl{{??it.position==1}}tc{{??}}tr{{?}}"  style="background:{{=it.bgcolor}}">\r\n        <h3>{{=it.title}}</h3><span></span>\r\n    </section>\r\n</div>\r\n'}),define("components/modules/title/view",["doT","text!components/modules/title/tpl.html"],function(e,t){return Backbone.View.extend({template:e.template(t),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model)),this}})}),define("text!components/modules/search/tpl.html",[],function(){return'<div class="diy-conitem pd-lr" style="margin:{{=it.m_tb}} 0">\r\n    <form class="diy-search" onsubmit="return false";>\r\n        <input type="text" id="search-keyword" placeholder="商品搜索：请输入关键字" value={{?it.keyword}}{{=it.keyword}}{{?}}>\r\n        <button type="submit" class=\'js-keyword\'><i class="iconfont">&#xe646;</i></button>\r\n    </form> \r\n</div>\r\n'}),define("components/modules/search/view",["doT","text!components/modules/search/tpl.html"],function(e,t){return Backbone.View.extend({template:e.template(t),events:{"click .js-keyword":"search","keypress #search-keyword":"search"},initialize:function(){},render:function(){return this.$el.html(this.template(this.model)),this},search:function(e){if(e.keyCode==13||$(e.currentTarget).hasClass("js-keyword")){e.preventDefault();var t=$("#search-keyword").val();$.emptyScroll();if(t==="")return Backbone.history.navigate("#list",{trigger:!0,replace:!0}),!1;window.location.href=window.location.origin+"#list?&keyword="+t}}})}),define("text!components/modules/text_nav/tpl.html",[],function(){return'<div class="diy-conitem" style="margin:{{=it.m_tb}} 0">\r\n    <ul class="diy-text-nav row bg-white lh-3">\r\n        {{~it.item_list:v:index}}\r\n        <a href="{{=v.url}}">\r\n            <li>\r\n                <span>{{=v.title}}</span>\r\n                <i class="iconfont fr">&#xe603;</i>\r\n            </li>\r\n        </a>\r\n        {{~}}\r\n    </ul> \r\n</div>\r\n\r\n'}),define("components/modules/text_nav/view",["doT","text!components/modules/text_nav/tpl.html"],function(e,t){return Backbone.View.extend({template:e.template(t),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model)),this}})}),define("text!components/modules/img_nav/tpl.html",[],function(){return'{{?it.style==1}}\r\n<div class="diy-conitem" style="margin:{{=it.m_tb}} 0">\r\n    <ul class="diy-img-nav-1 row bg-white">\r\n        {{~it.item_list:v:index}}\r\n        <li style="width:{{=100/it.item_list.length}}%;">\r\n            <a href="{{=v.url}}">\r\n                <img class="lazy" data-original="{{=v.img}}!{{?it.item_list.length==1}}1-1{{??it.item_list.length==2}}2-2{{??}}4-4{{?}}" alt="">\r\n                <div style="background:{{=v.bg}};">{{=v.title}}</div>\r\n            </a>\r\n        </li>\r\n        {{~}}\r\n    </ul> \r\n</div>\r\n{{??it.style==3}}\r\n<div class="diy-conitem" style="margin:{{=it.m_tb}} 0">\r\n    <ul class="diy-img-nav-2 row">\r\n        {{~it.item_list:v:index}}\r\n        <li>\r\n            <a href="{{=v.url}}">\r\n                <img class="lazy" data-original="{{=v.img}}!4-4" alt="">\r\n                <div>{{=v.title}}</div>\r\n            </a>\r\n        </li>\r\n        {{~}}\r\n    </ul> \r\n</div>\r\n{{??it.style==2}}\r\n<div class="diy-conitem" style="margin:{{=it.m_tb}} 0">\r\n    <ul class="diy-img-nav-3 row">\r\n        {{~it.item_list:v:index}}\r\n            <li style="width:{{=100/it.item_list.length}}%;">\r\n                <a href="{{=v.url}}">\r\n                    <img class="lazy" data-original="{{=v.img}}!{{?it.item_list.length==1}}1-0{{??it.item_list.length==2}}2-0{{??}}4-0{{?}}" alt="">\r\n                    <div>{{=v.title}}</div>\r\n                </a>\r\n            </li>\r\n        {{~}}\r\n    </ul> \r\n</div>\r\n{{?}}\r\n\r\n'}),define("components/modules/img_nav/view",["doT","text!components/modules/img_nav/tpl.html","lazyload"],function(e,t){return Backbone.View.extend({template:e.template(t),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model)),this.$("img.lazy").lazyload({placeholder:"images/grey.gif",threshold:641}),this}})}),define("text!components/modules/cut_off/tpl.html",[],function(){return'<div class="diy-conitem-off"></div>\r\n\r\n'}),define("components/modules/cut_off/view",["doT","text!components/modules/cut_off/tpl.html"],function(e,t){return Backbone.View.extend({template:e.template(t),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model)),this}})}),define("text!components/modules/space/tpl.html",[],function(){return'<div class="diy-conitem-space bg-white" style="height:{{=it.height}}"></div>\r\n\r\n'}),define("components/modules/space/view",["doT","text!components/modules/space/tpl.html"],function(e,t){return Backbone.View.extend({template:e.template(t),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model)),this}})}),define("text!components/modules/top_nav/tpl.html",[],function(){return'{{?it.style==0}}\r\n<div class="diy-conitem tc" style="margin:{{=it.m_tb}} 0">\r\n    <ul class="diy-top-nav-1 row">\r\n    {{~it.item_list:v:index}}  \r\n        <li style="background:{{=v.bg}};color:{{=v.color}};box-shadow:inset 0 0 0 {{=it.pd}} #f4f4f4;width:{{=100/it.item_list.length}}%;">\r\n            <a href="{{=v.url}}">\r\n			{{=v.title}}\r\n            </a>\r\n        </li>\r\n    {{~}}\r\n    </ul> \r\n</div>\r\n{{??}}\r\n<div class="diy-conitem tc" style="margin:{{=it.m_tb}} 0">\r\n    <ul class="diy-top-nav-2 row">\r\n    {{~it.item_list:v:index}}\r\n        <li style="background:{{=v.bg}};color:{{=v.color}};box-shadow:inset 0 0 0 {{=it.pd}} #f4f4f4;width:{{=100/it.item_list.length}}%;">\r\n            <a href="{{=v.url}}">\r\n			    <img data-original="{{=v.img}}!{{?it.item_list.length==1}}1-1{{??it.item_list.length==2}}2-2{{??}}3-3{{?}}" alt="">\r\n			<div>{{=v.title}}</div>\r\n            </a>\r\n        </li>\r\n    {{~}}\r\n    </ul> \r\n</div>\r\n{{?}}\r\n'}),define("components/modules/top_nav/view",["doT","text!components/modules/top_nav/tpl.html","lazyload"],function(e,t){return Backbone.View.extend({template:e.template(t),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model)),this.$("img.lazy").lazyload({placeholder:"images/grey.gif",threshold:641}),this}})}),define("text!components/modules/showcase/tpl.html",[],function(){return'{{?it.style==1}}\r\n<div class="diy-conitem row" style="margin:{{=it.m_tb}} 0">\r\n    <div class="diy-showcase-1">\r\n    {{~it.item_list:v:index}}\r\n        <div class="col-6" style="{{?index==0}}/*min-height:100vw*/{{??index==1}}width:49%;margin-left:1%;margin-bottom:1%{{??}}width:49%;margin-left:1%;margin-top:1%{{?}}">\r\n            <a href="{{=v.url}}">\r\n                <img class="lazy" data-original="{{=v.img}}!2-{{?index==0}}1{{??}}2{{?}}" alt="">\r\n                {{?v.show_title!=0}}<span class="oneline pd-lr">{{=v.title}}</span>{{?}}\r\n            </a>\r\n        </div>\r\n    {{~}}\r\n    </div>\r\n</div>\r\n{{??it.style==2}}\r\n<div class="diy-conitem row" style="margin:{{=it.m_tb}} 0">\r\n    <div class="diy-showcase-2">\r\n    {{~it.item_list:v:index}}\r\n        <div class="col-4" style="{{?index==1}}margin:0 2%{{?}}">\r\n            <a href="{{=v.url}}">\r\n                <img class="lazy" data-original="{{=v.img}}!2-1" alt=""><!--2/1图片-->\r\n                {{?v.show_title!=0}}<span class="oneline pd-lr">{{=v.title}}</span>{{?}}\r\n            </a>\r\n        </div>\r\n    {{~}}\r\n    </div>\r\n</div>\r\n{{?}}\r\n\r\n'}),define("components/modules/showcase/view",["doT","text!components/modules/showcase/tpl.html","lazyload"],function(e,t){return Backbone.View.extend({template:e.template(t),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model)),this.$("img.lazy").lazyload({placeholder:"images/grey.gif",threshold:641}),this}})}),define("text!components/modules/notice/tpl.html",[],function(){return'<section class="diy-conitem row pd orange01" style="background:{{?it.bgcolor}}{{=it.bgcolor}}{{??}}white{{?}};margin:{{=it.m_tb}} 0">\r\n        <i class="iconfont col-1">&#xe607;</i>\r\n        <marquee scrollamount="4" class="col-11">{{=it.notice}}</marquee>\r\n</section>'}),define("components/modules/notice/view",["doT","text!components/modules/notice/tpl.html"],function(e,t){return Backbone.View.extend({template:e.template(t),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model)),this}})}),define("text!components/modules/video/tpl.html",[],function(){return'<section class="diy-conitem" style="margin:{{=it.m_tb}} 0">\r\n    <iframe frameborder="0" height="200" src="http://v.qq.com/iframe/player.html?{{=it.code}}&height=200&auto=0" style="z-index: 1; " width="100%"></iframe>\r\n</section>'}),define("components/modules/video/view",["doT","text!components/modules/video/tpl.html"],function(e,t){return Backbone.View.extend({template:e.template(t),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model)),this}})}),define("text!components/modules/voice/tpl.html",[],function(){return'<div class="diy-conitem" style="margin:{{=it.m_tb}} 0">\r\n    <div class="diy-voice clearfix">\r\n            <img src="{{=it.img}}!4-4" width="40" height="40" class="voice-logo">\r\n            <span class="voice-bar">\r\n                <span class="pd-l black02 voice-load"></span>\r\n                <i class="voice-animation-static"></i>\r\n                <i class="voice-animation-play"></i>\r\n                <div class="voice-audio" data-src="{{=it.mp3}}" style="display:none"></div>\r\n            </span>\r\n            \r\n                <!-- data-play:判断是否继续播放；data-trans播放状态-->\r\n                <!-- <audio preload data-play="off" data-trans="off" data-src="{{=it.mp3}}" data-load="off" loop></audio>  -->   \r\n        </div>\r\n</div>\r\n    '}),define("components/modules/voice/view",["doT","text!components/modules/voice/tpl.html"],function(e,t){return Backbone.View.extend({template:e.template(t),events:{"click .voice-bar":"aplay","click .voice-btn":"aplay"},initialize:function(){},render:function(){return this.$el.html(this.template(this.model)),this},aplay:function(e){var t=this;$this=$(e.currentTarget),$audio=$(e.currentTarget).find("div.voice-audio");if($audio.html()===""){$this.addClass("disabled"),$this.find(".voice-load").html("加载中");var n=new Audio;n.loop=!0,n.src=$audio.attr("data-src"),$audio.append(n),n.onloadedmetadata=function(){$this.find(".voice-load").html(""),$this.removeClass("disabled"),t.$el.find(".diy-voice").addClass("voice-play"),n["data-trans"]="on",n["data-play"]="off",n.play()}}else{var r=$audio.find("audio");r.attr("data-trans")=="off"?(this.$el.find(".diy-voice").addClass("voice-play"),r.attr("data-trans","on"),r.get(0).play()):(this.$el.find(".diy-voice").removeClass("voice-play"),r.attr("data-trans","off"),r.get(0).pause(),r.attr("data-play")=="off"&&(r.get(0).currentTime="0"))}}})}),define("text!components/modules/seckill/tpl.html",[],function(){return'<div class="diy-conitem" style="margin:{{=it.m_tb}} 0">\r\n{{~it.item_list:v:index}}\r\n<div class="diy-seckill row {{?v.status==1}} on{{??v.status==2}} on end disabled{{?}}" data-id="{{=v.id}}">\r\n    <div class="fl seckill-left">\r\n        <img data-original="{{=v.img}}!4-4" alt="" class="seckill-img lazy" />\r\n        <p class="seckill-time">\r\n            {{?v.status==0}}\r\n                {{=v.start_at.substr(5,2)}}月{{=v.start_at.substr(8,2)}}日{{=v.start_at.split(\' \')[1]}}\r\n            {{??v.status==1}}\r\n                {{=v.end_at.substr(5,2)}}月{{=v.end_at.substr(8,2)}}日{{=v.end_at.split(\' \')[1]}}\r\n            {{??}}\r\n                已经结束\r\n            {{?}}\r\n        </p>\r\n    </div>\r\n    <div class="fl seckill-right">\r\n        <p class="oneline">{{=v.title}}</p>\r\n        <p class="small">原价:¥{{=v.old_price}}</p>\r\n        <p>{{=v.price_type}}:<b>¥{{=v.price}}</b>{{?v.freesend}}<small>包邮</small>{{?}}</p>\r\n        <div class="seckill-status">\r\n            <span class="seckill-tip twoline">{{=v.tip}}</span>\r\n            <div class="seckill-stock row">\r\n                <div class="seckill-btn">\r\n                {{?v.status==1}}马上抢{{??v.status==2}}抢完了{{?}}\r\n                </div>\r\n                <div class="col-3">已抢购</div>\r\n                <div class="col-9">\r\n                    <div class="seckill-percent" style="width:{{?v.status==1}}{{?parseFloat(v.percent)<10}}10%{{??}}{{=v.percent}}{{?}}{{??v.status==2}}100%{{?}}"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <p class="seckill-run">\r\n            <i class="iconfont">&#xe66f;</i>\r\n            {{?v.status==2}}\r\n            <i>活动结束</i>\r\n            {{??}}\r\n            <i class="downCount" data-id="{{=v.id}}"></i>\r\n            {{?}}\r\n        </p>\r\n    </div>\r\n    <div class="seckill-event {{?v.status==0}}disabled{{?}}" data-id="{{=v.id}}">\r\n        <a href="#goods/{{=v.id}}"></a>\r\n        <div class="js-open-cart" cart-gid="{{=v.id}}" cart-type="5"></div>\r\n    </div>\r\n    <div class="seckill-bg"><img src="images/seckill-end.png" alt=""></div>\r\n</div>\r\n{{~}}\r\n</div>'}),define("components/modules/seckill/view",["doT","text!components/modules/seckill/tpl.html","components/cart/views/main","lazyload"],function(e,t,n){return Backbone.View.extend({template:e.template(t),events:{"click .js-open-cart":"openCart"},initialize:function(){},render:function(){this.$el.html(this.template(this.model)),this.$("img.lazy").lazyload({placeholder:"images/grey.gif",threshold:641});var e=Date.parse(this.model.now_at.replace(/-/g,"/"));_global.serverOffset=e-(new Date).getTime();for(var t=0;t<this.model.item_list.length;t++)this.seckill(this.model.item_list[t]);return this},seckill:function(e){var t=this,n=e.id,r=e.status;r==0?t.startSeckill(n,e):r==1&&t.endSeckill(n,e)},startSeckill:function(e,t){var n=this;$(".downCount[data-id="+e+"]").downCount({id:e,date:t.start_at,serverOffset:_global.serverOffset,run:10,content:"距开始"},function(){n.endSeckill(e,t)})},endSeckill:function(e,t){var n=this,r=$(".diy-seckill[data-id="+e+"]"),i=parseFloat(t.percent)<10?"10%":t.percent;$(".seckill-event[data-id="+e+"]").removeClass("disabled"),r.addClass("on"),r.find(".seckill-btn").text("马上抢"),r.find(".seckill-percent").css("width",i),r.find(".seckill-time").text(t.end_at.substr(5,2)+"月"+t.end_at.substr(8,2)+"日"+t.end_at.split(" ")[1]),$(".downCount[data-id="+e+"]").downCount({id:e,date:t.end_at,run:10,serverOffset:_global.serverOffset,content:"距结束"},function(){r.addClass("disabled end"),r.find(".seckill-btn").text("抢完了"),r.find(".seckill-percent").css("width","100%"),r.find(".seckill-time,.downCount").text("活动结束")})},openCart:function(e){var t=new n;t.open(e)}})}),define("text!components/modules/coupon/tpl.html",[],function(){return'<div class="diy-conitem swiper-container diy-coupon-scroll" style="margin:{{=it.m_tb}} 0;">\r\n	<div class="swiper-wrapper">\r\n		<ul class="diy-coupon swiper-slide row">\r\n		{{for(var i=0,l=it.item_list.length;i<l;i++){}}\r\n			{{?l==1}}\r\n			<li name="one" class="row diy-coupon-item js-get-coupon" data-id={{=it.item_list[i].id}}>\r\n			    <div class="diy-coupon-left col-8">\r\n			        <i class="iconfont">&#xe679;</i>\r\n			        <div class="diy-coupon-amount">\r\n				        <em>￥</em><b>{{=parseFloat(it.item_list[i].fee).toFixed(0)}}</b>\r\n				        <span class="fl tl">满{{=parseFloat(it.item_list[i].amount).toFixed(0)}}元可用<br />元优惠券</span>\r\n			        </div>\r\n			    </div>\r\n			    <div class="diy-coupon-right col-4">\r\n			    	<div class="coupon-get">立即领取</div>\r\n			    </div>\r\n			</li>\r\n			{{??l==2}}\r\n			<li name="two" class="row diy-coupon-item js-get-coupon" data-id={{=it.item_list[i].id}}>\r\n			    <i class="iconfont">&#xe679;</i>\r\n			    <div class="diy-coupon-sup row">\r\n			        <div class="col-5"><span>￥</span>{{=parseFloat(it.item_list[i].fee).toFixed(0)}}</div>\r\n			        <div class="col-7 tl">满{{=parseFloat(it.item_list[i].amount).toFixed(0)}}元可用<br />元优惠券</div>\r\n			    </div>\r\n			    <div class="diy-coupon-sub">\r\n			    	关注即可领取\r\n			    </div>\r\n			</li>\r\n			{{??l==3}}\r\n			<li name="three" class="row diy-coupon-item js-get-coupon" data-id={{=it.item_list[i].id}}>\r\n			    <i class="iconfont">&#xe679;</i>\r\n			    <div class="diy-coupon-sup row">\r\n			        <div class="col-12"><span>￥</span>{{=parseFloat(it.item_list[i].fee).toFixed(0)}}</div>\r\n			        <div class="col-12">满{{=parseFloat(it.item_list[i].amount).toFixed(0)}}元可用</div>\r\n			        <div class="col-12">关注即可领取</div>\r\n			    </div>\r\n			</li>\r\n			{{??l>3}}\r\n			<li name="more" class="row diy-coupon-item js-get-coupon" data-id={{=it.item_list[i].id}}>\r\n			    <i class="iconfont">&#xe679;</i>\r\n			    <div class="diy-coupon-sup row">\r\n			        <div class="col-12"><span>￥</span>{{=parseFloat(it.item_list[i].fee).toFixed(0)}}</div>\r\n			        <div class="col-12">满{{=parseFloat(it.item_list[i].amount).toFixed(0)}}元可用</div>\r\n			        <div class="col-12">关注即可领取</div>\r\n			    </div>\r\n			</li>\r\n			{{?}}\r\n		{{}}}\r\n		</ul>\r\n	</div>\r\n	<!-- Add Scroll Bar -->\r\n    <div class="swiper-scrollbar"></div>\r\n</div>\r\n    \r\n'}),define("components/coupon_layer/model",[],function(){return Backbone.Model.extend({initialize:function(e){this.urlApi=e},url:function(){return this.urlApi}})}),define("text!components/coupon_layer/coupon_layer.html",[],function(){return'{{?it.coupon}}\r\n<div class="coupon-layer-0">\r\n    <div class="coupon-stamp">\r\n       <div class="par">\r\n            <p>优<br />惠<br />券</p>\r\n        </div>\r\n        <div class="copy">\r\n            <p>{{=parseFloat(it.coupon.fee).toFixed(0)}}元</p>\r\n            <span>\r\n            {{?parseFloat(it.coupon.amount) != 0}}\r\n                订单满{{=parseFloat(it.coupon.amount).toFixed(0)}}可用\r\n            {{??}}\r\n                无门槛使用\r\n            {{?}}\r\n            </span>\r\n        </div>\r\n        <i></i>\r\n    </div>\r\n    <div class="coupon-tips">\r\n        <time>有效期：{{=it.coupon.start_at.split(\' \')[0]}}至{{=it.coupon.end_at.split(\' \')[0]}}</time>\r\n        <p>{{=it.coupon.tip}}</p>\r\n        <div><i class="iconfont">&#xe630;</i>{{=it.coupon.tip2}}</div>\r\n    </div>\r\n</div>\r\n{{??}}\r\n\r\n<div class="coupon-layer-1">\r\n    <span>{{=it.coupon_status.msg}}</span><br />\r\n    {{?it.coupon_status.status==1}}\r\n    <img src="images/img_layer_03.png" alt="" />\r\n    {{??it.coupon_status.status==2}}\r\n    <img src="images/img_layer_03.png" alt="" />\r\n    {{??it.coupon_status.status==3}}\r\n    <img src="images/img_layer_01.png" alt="" />\r\n    {{??it.coupon_status.status==4}}\r\n    <img src="images/img_layer_02.png" alt="" />\r\n    {{??it.coupon_status.status==5}}\r\n    <img src="images/img_layer_03.png" alt="" />\r\n    {{??it.coupon_status.status==6}}\r\n    <img src="images/img_layer_03.png" alt="" />\r\n    \r\n    {{?}}\r\n</div>\r\n{{?}}\r\n'}),define("text!components/share/tpl.html",[],function(){return'<div class="wxshare">\r\n    {{? !this.type}}\r\n    <img src="images/wxshare.png" alt="微信分享">\r\n    {{??}}\r\n    <img src="images/wxshare-{{=this.type}}.png" alt="微信分享">\r\n    {{?}}\r\n</div>\r\n'}),define("components/share/view",["doT","text!components/share/tpl.html"],function(e,t){var n=Backbone.View.extend({el:"#popup",template:e.template(t),initialize:function(e,t){this.type=t},render:function(){return this.$el.html(this.template()),this},events:{"click .wxshare":"hideshare"},hideshare:function(){$("#popup").empty()}});return n}),define("components/coupon_layer/view",["doT","components/coupon_layer/model","text!components/coupon_layer/coupon_layer.html","components/share/view"],function(e,t,n,r){var i="/coupon/get.json",s="/coupon/couponInfo.json";return Backbone.View.extend({layerTemplate:e.template(n),initialize:function(e,n,r){this.trigger("remove-compnents-coupon_layer");var o=this;Backbone.View.prototype.on("remove-compnents-coupon_layer",function(){Backbone.View.prototype.off(),o.undelegateEvents()});var u;r!==undefined?u=s:u=i,this.share=n,this.virtualModel=new t(u),this.getCoupon(e)},getCoupon:function(e){var t=this,n=$(e.currentTarget),r=n.data("id")||n.attr("cid");if(_global.user=="")return $("#popup").empty(),this.undelegateEvents(),$.signInit("modal"),!1;$.indicator();var i={id:r};this.virtualModel.clear(),this.virtualModel.set(i),this.virtualModel.save(null,{success:function(e,n){n.status?t.layerCoupon(n):layer.open({content:n.msg,time:2}),$.indicator("hide")}})},layerCoupon:function(e){var t=this,n="layer-init layer-coupon",i=this.layerTemplate(e),s=[];for(var o=0;o<e.btn.length;o++)s.push(e.btn[o].text);var u=function(e){t.share&&e.indexOf("qrcode")!=-1?($("#popup").append((new r).render().$el),$(".wxshare").show()):Backbone.history.navigate(e,{trigger:!0,replace:!0})},a=function(n){layer.close(n),t.undelegateEvents(),u(e.btn[0].url)},f=function(n){t.undelegateEvents(),u(e.btn[1].url)};layer.open({content:i,btn:s,className:n,yes:a,no:f})}})}),define("components/modules/coupon/view",["doT","text!components/modules/coupon/tpl.html","components/coupon_layer/view"],function(e,t,n){return Backbone.View.extend({template:e.template(t),events:{"click .js-get-coupon":"getCoupon"},initialize:function(){},render:function(){this.$el.html(this.template(this.model));var e=this.model.item_list.length;if(e>=4){var t=$("body").outerWidth();$('.diy-coupon li[name="more"]').css({width:t/3.3}),$(".diy-coupon").css({width:t/3.3*e});var n=new Swiper(".diy-coupon-scroll",{scrollbar:".swiper-scrollbar",slidesPerView:"auto",mousewheelControl:!0,freeMode:!0})}return this},getCoupon:function(e){var t=new n(e)}})}),define("text!components/modules/tel/tpl.html",[],function(){return'<div class="diy-conitem pd bg-white" style="margin:{{=it.m_tb}} 0">\r\n        <i class="iconfont">&#xe677;</i>\r\n        <a href="tel:{{=it.tel}}">{{=it.name}} {{=it.tel}}</a>\r\n        <!-- <i class="iconfont fr">&#xe603;</i> -->\r\n</div>'}),define("components/modules/tel/view",["doT","text!components/modules/tel/tpl.html"],function(e,t){return Backbone.View.extend({template:e.template(t),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model)),this}})}),define("text!components/modules/groupbuy/tpl.html",[],function(){return'<div class="diy-groupbuy" style="margin:{{=it.m_tb}} 0;">\r\n    {{~it.item_list :value:index}}\r\n    <div class="groupbuy-home bd-b m-b">\r\n        <div class="groupinfo-goods clearfix">\r\n            <span class="thumb fl col-3"><img data-original="{{=value.goods_img}}!4-4" alt="{{=value.goods_name}}" class="lazy"></span>\r\n            <div class="fl col-9">\r\n                <strong>{{=value.goods_name}}</strong>\r\n                <p class="fl">{{=value.goods_spec}}</p>\r\n                <del class="fr">￥{{=value.goods_price}}</del>\r\n            </div>\r\n        </div>\r\n        <div class="groupinfo-bot clearfix">\r\n            <div class="groupinfo-main{{? value.item.length <= 1}} single{{?}}">\r\n                {{~value.item :v:i}}\r\n                <p{{? v.group_num == \'5\'}} class="golden"{{?}}><span class="iconfont">&#xe657;</span>{{=v.group_num}}人团：￥<strong>{{=parseInt(v.price)}}</strong>.{{=v.price.split(\'.\')[1]}}</p>\r\n                {{~}}\r\n            </div>\r\n            <div class="groupinfo-btn">\r\n                <a href="#goods/groupbuy/{{=value.group_id}}">拼团购买</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    {{~}}\r\n</div>'}),define("components/modules/groupbuy/view",["doT","text!components/modules/groupbuy/tpl.html","lazyload"],function(e,t){return Backbone.View.extend({template:e.template(t),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model)),this.$("img.lazy").lazyload({placeholder:"images/grey.gif",threshold:641}),this}})}),define("text!components/modules/bargain/tpl.html",[],function(){return'<div class="diy-conitem">\r\n    {{~it.item_list:v:index}}\r\n    <div class="diy-bargain row bg-white bd-b m-tb {{?!v.state}}disabled{{?}}">\r\n        <a href="#goods/bargain/{{=v.id}}">\r\n            <img data-original="{{=v.img}}!4-4" class="col-3 bd-rd pd lazy">\r\n            <div class=\'col-9\'>\r\n                <p class="twoline col-12">{{=v.title}}</p>\r\n                <p><small class="fl black02 td-lh pd-r">原价：¥{{=v.old_price}}</small>{{?v.sendfree}}<span class="fl btn-blue">包邮</span>{{?}}</p>\r\n                <p class="col-12 red01"><small>最低可砍至：¥ </small>{{=v.last_price}}</p>\r\n            </div>\r\n            <div class="diy-bargain-state bd-rd pd-lr btn-blue">{{?!v.state}}已结束{{??}}参与砍价{{?}}</div>\r\n        </a>\r\n    </div>\r\n    {{~}}\r\n</div>'}),define("components/modules/bargain/view",["doT","text!components/modules/bargain/tpl.html","lazyload"],function(e,t){return Backbone.View.extend({template:e.template(t),events:{},initialize:function(){},render:function(){return this.$el.html(this.template(this.model)),this.$("img.lazy").lazyload({placeholder:"images/grey.gif",threshold:641}),this}})}),define("components/modules/modules",["components/modules/goods/view","components/modules/slide/view","components/modules/rtf/view","components/modules/title/view","components/modules/search/view","components/modules/text_nav/view","components/modules/img_nav/view","components/modules/cut_off/view","components/modules/space/view","components/modules/top_nav/view","components/modules/showcase/view","components/modules/notice/view","components/modules/video/view","components/modules/voice/view","components/modules/seckill/view","components/modules/coupon/view","components/modules/tel/view","components/modules/groupbuy/view","components/modules/bargain/view"],function(){}),define("text!components/footer/tpl.html",[],function(){return'<footer class="footer-nav {{?it.style==0}}footer-style-0{{?}} media-fixed row">\r\n    {{~it.data:v:index}}\r\n        <a href="{{?index==1&&_global.shop.type>0}}{{=v.link2}}{{??}}{{=v.link}}{{?}}" style="color: {{=v.fontcolor}}; background: {{=v.bgcolor}}">\r\n        	{{?it.style==1}}\r\n            {{?index==0}}\r\n                {{?_global.shop.type==0}}\r\n                    <i data-icomoon="&#x{{=v.icon}}"></i>\r\n                {{??}}\r\n                    <i data-icomoon="&#x{{=v.icon2}}"></i>\r\n                {{?}}\r\n           {{??index==1}}\r\n                {{?_global.shop.type>0}}\r\n                    <i data-icomoon="&#x{{=v.icon2}}"></i>\r\n                {{??}}\r\n                    <i data-icomoon="&#x{{=v.icon}}"></i>\r\n                {{?}}\r\n            {{??}}\r\n                <i data-icomoon="&#x{{=v.icon}}"></i>\r\n            {{?}} <br />\r\n            {{?}}\r\n            <span>\r\n            	<!--0是总店 1是分店-->\r\n            	{{?index==0}}\r\n            		{{?_global.shop.type==0}}\r\n            			{{=v.title}}\r\n            		{{??}}\r\n            			{{=v.title2}}\r\n            		{{?}}\r\n            	<!--0或\'\'是非店主 1是店主-->\r\n            	{{??index==1}}\r\n				\r\n           			{{?_global.shop.type>0}}\r\n           				{{=v.title2}}\r\n           			{{??}}\r\n           				{{=v.title}}\r\n           			{{?}}\r\n\r\n            	{{??}}\r\n            		{{=v.title}}\r\n            	{{?}}\r\n\r\n            </span>\r\n        </a>\r\n    {{~}}\r\n</footer>'}),define("components/footer/model",[],function(){return Backbone.Model.extend({initialize:function(e){this.urlApi=e},url:function(){return this.urlApi}})}),define("components/footer/view",["doT","text!components/footer/tpl.html","components/footer/model"],function(e,t,n){var r="/menu/index.json";return Backbone.View.extend({className:"view-footer",template:e.template(t),events:{},initialize:function(){if($.localStorage()){var e=JSON.parse(localStorage.getItem("footer"))||0;if(e!==0)return this.render(e,0),!1;localStorage.removeItem("footer")}this.model=new n(r),this.model.on("sync",this.render,this),this.model.fetch({error:function(e,t){$.catchError(t)}})},render:function(e,t){$.localStorage()&&t?(e=e.toJSON(),localStorage.setItem("footer",JSON.stringify(e))):t&&(e=e.toJSON()),$("#views").append(this.$el.html(this.template(e)))}})}),define("components/aside/model",[],function(){return Backbone.Model.extend({initialize:function(e){this.urlApi=e},url:function(){return this.urlApi}})}),define("text!components/aside/tpl.html",[],function(){return'<!-- <div class="aside-fixed media-fixed">\r\n	<div class=\'aside-content\'>\r\n		<a href="#cart"><i class="iconfont">&#xe61f;</i></a>\r\n		<i class="iconfont js-go-top">&#xe669;</i>\r\n	</div>\r\n</div> -->\r\n<div class="aside-fixed media-fixed">\r\n	<div class=\'aside-content\'>\r\n		<i class="iconfont js-aside-more">&#xe609;</i>\r\n	</div>\r\n</div>\r\n{{?it.style==1}}\r\n<div class="aside-style as-hide aside-style-1">\r\n	<div class="aside-bg as-bg-fixed-1 media-fixed"></div>\r\n	<div class="as-fixed-1 row tc media-fixed">\r\n	{{~it.item_list:v:index}}\r\n		<a href="{{=v.url}}" class="col-3" style="color:{{=v.color}};background:{{=v.bgcolor}}">\r\n			<i data-icomoon="&#x{{=v.icon}}"></i><br />\r\n			<span style="color:{{=v.color}}">{{=v.text}}</span>\r\n		</a>\r\n	{{~}}\r\n	</div>\r\n</div>\r\n{{??it.style==2}}\r\n<div class="aside-style as-hide aside-style-2">\r\n	<div class="aside-bg as-bg-fixed-2 media-fixed"></div>\r\n	<div class="as-fixed-2 row media-fixed">\r\n		<div class="col-6 aside-bg"></div>\r\n		<div class="col-6 bg-white">\r\n		{{?_global.user!=\'\'}}\r\n			<div class="bg-white pd as-title bd-b">\r\n				<img src="{{=_global.user.photo}}" class="" alt="">\r\n				<span class="oneline">{{=_global.user.nick_name}}</span>\r\n				<span><small>{{=_global.user.mobile}}</small></span>\r\n			</div>\r\n		{{?}}\r\n		{{~it.item_list:v:index}}\r\n			<a href="{{=v.url}}" style="color:{{=v.color}};background:{{=v.bgcolor}}">\r\n				<i data-icomoon="&#x{{=v.icon}}"></i>\r\n				<span style="color:{{=v.color}}">{{=v.text}}</span>\r\n			</a>\r\n		{{~}}\r\n		</div>\r\n	</div>\r\n</div>\r\n{{??it.style==3}}\r\n<div class="aside-style as-hide aside-style-3">\r\n	<div class="aside-bg as-bg-fixed-3 media-fixed"></div>\r\n	<div class="as-fixed-3 row media-fixed">\r\n		<div class="as-list-3">\r\n		{{~it.item_list:v:index}}\r\n			<a href="{{=v.url}}" style="color:{{=v.color}};background:{{=v.bgcolor}}">\r\n				<i data-icomoon="&#x{{=v.icon}}"></i>\r\n			</a>\r\n		{{~}}\r\n		</div>\r\n	</div>\r\n</div>\r\n{{??}}\r\n<div class="aside-style as-hide aside-style-0">\r\n	<div class="aside-bg as-bg-fixed-0 media-fixed"></div>\r\n	<div class="as-fixed-0 row media-fixed">\r\n		<div class="as-list-0">\r\n		{{~it.item_list:v:index}}\r\n			<a href="{{=v.url}}" style="color:{{=v.color}};background:{{=v.bgcolor}}">\r\n				<i data-icomoon="&#x{{=v.icon}}"></i>\r\n				<span style="color:{{=v.color}}">{{=v.text}}</span>\r\n				{{?it.item_list.length-1==index}}<em style="color:{{=v.color}};background:{{=v.bgcolor}}"></em>{{?}}\r\n			</a>\r\n		{{~}}\r\n		</div>\r\n	</div>\r\n</div>\r\n{{?}}\r\n<!-- <i data-icomoon="&#x{{=v.icon}}"></i> -->'}),define("components/aside/view",["doT","components/aside/model","text!components/aside/tpl.html"],function(e,t,n){var r="/menu/getFooter.json";return Backbone.View.extend({className:"view-aside",template:e.template(n),events:{"click .js-go-top":"goTop","click .js-aside-more":"moreAside","click .aside-bg":"moreAside"},initialize:function(){if($.localStorage()){var e=JSON.parse(localStorage.getItem("aside"))||0;if(e!==0)return this.render(e,0),!1;localStorage.removeItem("aside")}this.model=new t(r),this.model.on("sync",this.render,this),this.model.fetch({error:function(e,t){$.catchError(t)}})},render:function(e,t){$.localStorage()&&t?(e=e.toJSON(),localStorage.setItem("aside",JSON.stringify(e))):t&&(e=e.toJSON()),this.asideStyle=e.style;if(e.item_list.length===0)return this.undelegateEvents(),!1;$("#views").append(this.$el.html(this.template(e)))},moreAside:function(e){var t=this;if($(".js-aside-more").hasClass("disabled"))return!1;$(".js-aside-more").addClass("disabled"),$(".aside-style").hasClass("as-hide")?($(".js-aside-more").css({transform:"rotate(45deg)","-webkit-transform":"rotate(45deg)"}),$(".aside-style").removeClass("as-hide").addClass("as-on"),$(".as-bg-fixed-"+this.asideStyle).css({"z-index":"12"}),$(".as-fixed-"+this.asideStyle).css({"z-index":"12"}),$(".as-bg-fixed-"+this.asideStyle).css({opacity:1}),this.asideStyle===0?$(".as-list-"+this.asideStyle).css({right:"5rem",opacity:1}):this.asideStyle===1?$(".as-fixed-"+this.asideStyle).css({bottom:0}):this.asideStyle===2?$(".as-fixed-"+this.asideStyle).css({"margin-left":0}):this.asideStyle===3&&($(".as-fixed-"+this.asideStyle).find("a").css({opacity:1}),$(".as-fixed-"+this.asideStyle).find("a").each(function(e){$(this).animate({bottom:Math.cos(Math.PI/7*e)*8+"rem",right:Math.sin(Math.PI/7*e)*8+"rem"},500)})),setTimeout(function(){$(".js-aside-more").removeClass("disabled")},500)):($(".js-aside-more").css({transform:"rotate(0deg)","-webkit-transform":"rotate(0deg)"}),$(".aside-style").removeClass("as-on").addClass("as-hide"),$(".as-bg-fixed-"+this.asideStyle).css({opacity:0}),this.asideStyle===0?($(".as-list-"+this.asideStyle).css({right:"-100%"}),setTimeout(function(){$(".as-list-"+t.asideStyle).css({opacity:0})},500)):this.asideStyle===1?$(".as-fixed-"+this.asideStyle).css({bottom:"-15rem"}):this.asideStyle===2?$(".as-fixed-"+this.asideStyle).css({"margin-left":"100%"}):this.asideStyle===3&&($(".as-fixed-"+this.asideStyle).find("a").css({opacity:0}),$(".as-fixed-"+this.asideStyle).find("a").each(function(e){$(this).animate({bottom:0,right:0},500)})),setTimeout(function(){$(".js-aside-more").removeClass("disabled"),$(".as-bg-fixed-"+t.asideStyle).css({"z-index":"-1"}),$(".as-fixed-"+t.asideStyle).css({"z-index":"-1"})},500))},hideTop:function(){$(window).on("scroll",function(e){var t=$(window).scrollTop();t>300?$(".js-go-top",this.$el).show():$(".js-go-top",this.$el).hide()})},goTop:function(e){$(document).scrollTop(0)}})}),define("text!components/decorate/tpl.html",[],function(){return'{{? it.curr == 0}}\r\n<div class="user-info clearfix style1">\r\n    <div class="sign-img"><img class="lazy" data-original="{{=it.cover}}!1-2" alt="{{=it.name}}" style="width:100%;max-height:50vw"></div>\r\n    <div class="sign-wrap">\r\n        <a href="#decorate">\r\n            <span class="avatar"><img class="lazy" data-original="{{=it.avatar}}" alt="{{=it.name}}"></span>\r\n            <h1>{{=it.name}}</h1>\r\n            <!-- <p>{{=it.notice}}</p> -->\r\n        </a>\r\n        <ul class="menu clearfix">\r\n            <li><a href="#list"><span>{{=it.goods.all}}</span>全部商品</a></li>\r\n            <li><a href="#list?&type=active"><span>{{=it.goods.active}}</span>活动商品</a></li>\r\n            <li><a href="#category"><span class="iconfont">&#xe67c;</span>商品分类</a></li>\r\n            <li><a href="#apply/follow"><span class="iconfont">&#xe605;</span>关注公众号</a></li>\r\n        </ul>\r\n    </div>\r\n</div>\r\n{{? it.havenotice}}\r\n<div class="bg-white bd-b user-notice"><span class="iconfont">&#xe607;</span>公告：{{=it.notice}}</div>\r\n{{?}}\r\n{{?? it.curr == 1}}\r\n<div class="user-info clearfix style1">\r\n    <div class="sign-img"><img class="lazy" data-original="{{=it.cover}}!1-2" alt="{{=it.name}}" style="width:100%;max-height:50vw"></div>\r\n    <div class="sign-wrap">\r\n        <a href="#decorate">\r\n            <span class="avatar"><img class="lazy" data-original="{{=it.avatar}}" alt="{{=it.name}}"></span>\r\n            <h1>{{=it.name}}</h1>\r\n            <!-- <p>{{=it.notice}}</p> -->\r\n        </a>\r\n        <ul class="menu clearfix">\r\n            <li><a href="#list"><span>{{=it.goods.all}}</span>全部商品</a></li>\r\n            <li><a href="#list?&type=active"><span>{{=it.goods.active}}</span>活动商品</a></li>\r\n            <li><a href="#category"><span class="iconfont">&#xe67c;</span>商品分类</a></li>\r\n        </ul>\r\n    </div>\r\n</div>\r\n<!-- <div class="user-info style2 media-fixed lazy" data-original="{{=it.cover}}!1-2">\r\n    <a href="#decorate">\r\n        <span class="avatar"><img  class="lazy" data-original="{{=it.avatar}}" alt="{{=it.name}}"></span>\r\n        <h1>{{=it.name}}</h1>\r\n        <p>{{=it.notice}}</p>\r\n    </a>\r\n</div> -->\r\n{{?}}'}),define("components/decorate/view",["doT","text!components/decorate/tpl.html","lazyload"],function(e,t){var n=Backbone.View.extend({id:"signTpl",template:e.template(t),initialize:function(){},render:function(e,t){return e.curr=t,e=$.headImages(e,"avatar",96),this.$el.html(this.template(e)),this.$("img.lazy").lazyload({placeholder:"images/grey.gif",event:"load"}),this.$("div.lazy").lazyload({event:"load"}),this}});return n}),define("apps/home/views/main",["doT","text!apps/home/templates/main.html","apps/home/models/home","components/modules/modules","components/footer/view","components/aside/view","components/decorate/view","swiper"],function(e,t,n,r,i,s,o){var u=Backbone.View.extend({id:"view-home",template:e.template(t),events:{},initialize:function(e){$.setTitle("店铺首页"),$("#views").append(this.$el),this.model=new n(e),this.model.on("sync",this.render,this),this.model.fetch({error:function(e,t){$.catchError(t)}})},render:function(){var e=this.model.get("title");e&&$.setTitle(e);var t=this.model.get("bg");t&&$("#view-home").css({background:t}),this.$el.html(this.template());var n=this;$.each(this.model.get("data"),function(e,t){n.renderModule(t.type,t.content)});var r=this.model.get("header"),u=this.model.get("header_style");$(".view-header").append((new o).render(r,u).$el);var a=new s,f=new i;$.setForward(),$.loading("hide"),$.backScroll(1)},renderModule:function(e,t){var n=require("components/modules/"+e+"/view"),r=$('<div class="modules-'+e+'"></div>');$(".view-container",this.$el).append(r);var i=new n({model:t});r.html(i.$el),i.render()}});return u}),define("apps/home/app",["apps/home/views/main"],function(e){var t="/index/template.json";return{main:function(){this.mainView=new e(t)}}});